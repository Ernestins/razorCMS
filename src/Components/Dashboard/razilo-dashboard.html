<link rel="import" href="/components/paper-tabs/paper-tabs.html">

<link rel="import" href="razilo-dashboard-detail.html" />
<link rel="import" href="razilo-dashboard-page.html" />
<link rel="import" href="razilo-dashboard-content.html" />
<link rel="import" href="razilo-dashboard-extension.html" />
<link rel="import" href="razilo-dashboard-user.html" />
<link rel="import" href="razilo-dashboard-setting.html" />

<dom-module id="razilo-dashboard">
	<template>
		<style include="razilo-style-base">
			* { color: #333; --primary-text-color: #333; }

			:host {
				position: fixed;
				display: none;
			    width: 1px;
			    height: 1px;
			    z-index: -1;
				background-color: #f4f4f4;
				border: 1px solid #eee;
				box-shadow: 0px 0px 30px 0px;
			}

			:host([opened]) {
				display: block;
				position: fixed;
				top: 2%;
				left: 2%;
			    width: 96%;
			    height: 96%;
			    z-index: 101;
			}

			paper-tabs { margin: 0px 20px; --paper-tabs-selection-bar-color: #333; --paper-tab-ink: #333; }
			paper-tab { color: #333; }
			.sheet { padding: 20px; overflow: auto; box-sizing: border-box; }
			.close { position: absolute; top: 1px; right: 1px; border-radius: 50px; background-color: red; color: white; cursor: pointer; opacity: 0.8; }
		</style>

		<div id="container">
			<iron-icon class="close" on-click="close" icon="icons:close"></iron-icon>
			<paper-tabs id="tabs" selected="{{tab}}">
				<paper-tab>Detail</paper-tab>
				<paper-tab>Pages</paper-tab>
				<paper-tab>Content</paper-tab>
				<paper-tab>Extensions</paper-tab>
				<paper-tab>Users</paper-tab>
				<paper-tab>Settings</paper-tab>
			</paper-tabs>
			<div id="sheet" class="sheet">
				<razilo-dashboard-detail current-page="{{currentPage}}" hidden$="{{different(tab, 0)}}"></razilo-dashboard-detail>
				<razilo-dashboard-page hidden$="{{different(tab, 1)}}"></razilo-dashboard-page>
				<razilo-dashboard-content hidden$="{{different(tab, 2)}}"></razilo-dashboard-content>
				<razilo-dashboard-extension hidden$="{{different(tab, 3)}}"></razilo-dashboard-extension>
				<razilo-dashboard-user hidden$="{{different(tab, 4)}}"></razilo-dashboard-user>
				<razilo-dashboard-setting hidden$="{{different(tab, 5)}}"></razilo-dashboard-setting>
			</div>
		</div>
	</template>

	<script>
		class RaziloDashboard extends Polymer.Element {
			static get is() { return "razilo-dashboard"; }

			static get properties() {
				return {
					currentPage: { type: String, value: null },
					opened: { type: Boolean, value: false },
					tab: { type: Number, value: 0 }
				}
			}

			constructor() {
				super();

				this.bodyOverflow = document.body.style.overflow;
			}

			ready() {
				super.ready();
			}

			open() {
				this.opened = true;
				this.setAttribute('opened', '');
				this.resize();
				this.tab = 0;
				document.body.style.overflow = 'hidden';
			}

			close() {
				this.opened = false;
				this.removeAttribute('opened');
				document.body.style.overflow = this.bodyOverflow;
			}

			resize() {
				this.$.sheet.style.height = this.offsetHeight - this.$.tabs.offsetHeight -1 + 'px';
			}

			different(a, b) {
				return a != b;
			}

			doSave() {
				consoel.log('save');
			}
		}

		customElements.define(RaziloDashboard.is, RaziloDashboard);
	</script>
</dom-module>
